# 第1讲 Git的使用

## 1.1 版本

### 版本的概念及演变过程

#### 概念

版本最早使用在书籍，刻印等物品上，用于记录事物与事物之间关系和区别。随着时代的发展，版本也开始使用在影视，软件等虚拟物品上。
软件版本编号，指以数字的形式制定软件的先后顺序及版本标志。如node 15.11.0,QQ 2021 beta等。

#### 版本号演变过程

主版本号.次版本号.修订号

### 版本管理

#### 传统方式

建立多个项目文件，文件多，管理繁琐，维护复杂。

#### 新型方式（版本控制方式）

版本控制软件是一个用来记录文件变化，以便将来查阅特定版本修订情况的系统，因此有时也叫做“版本控制系统”。改变传统方式维护软件的弊端。

使用版本控制以后，只需在本地保存一份，各个版本由版本控制软件来进行管理，常见的版本控制软件有git和svn。

## 1.2 Git简介

### 概念

Git 是一个开源的分布式版本控制系统，是目前世界上最先进、最流行的版本控制系统。可以快速高效地处理从很小到非常大的项目版本管理。

### 特点

高性能和高可用性（项目越大，特点越明显）。

### 区域划分

工作区、暂存区、Git仓库

**注：**git管理提交仓库，只能按顺序 工作区=>暂存区=>仓库区

## 1.3 Git安装

下载地址：https://git-scm.com/downloads

## 1.4 Git配置和操作

**Git用户信息配置：**

设置用户名     

```
git config --global user.name "你的名字或昵称"
```

设置邮箱

```
git config --global user.email "你的邮箱"
```

查看配置信息  

```
git config --list
```

**具体操作步骤:**

1.使用git命令初始化项目
2.编写项目代码
3.把工作区添加到暂存区
4.将暂存区内容提交到仓库区

## 1.5 Git常用命令

**init**：初始化GIt命令工具

```
git init
```

**add**：将工作区的文件提交到暂存区

```
git add . / git add 指定文件
```

**commit**：将暂存区的文件提交到本地仓库

```
git commit -m "说明内容"
```

**status**：查看暂存区的状态

```
git status
```

**log**：查看提交的版本记录

```
git log [--oneline]
```

**reset**：回滚项目内容，注：工作区会同时回滚，回滚之前建议保存新代码。

```
git reset --hard 版本号
```

**reflog**：查看当前用户的所有操作记录。

```
git reflog
```

## 1.6 Git文件忽略

对于私有文件/文件夹(无需git进行管理）可以将其配置为忽略文件模式，则提交仓库时，文件会被忽略提交。

**.gitignore配置文件**：用来配置需要忽略的文件/文件夹

**规则：**

1. /demo/ 过滤整个文件夹

2. *.txt 过滤指定类型的文件

3. /demo/index.html 过滤指定文件

   **注：**如果远程仓库中还有该文件/该类型，则不能被忽略，需要先删除仓库的索引和仓库的内容后，该规则才会生效。

## 1.7 Git分支

在进行多人协作开发过程中，为了防止互相干扰，提高协同开发体验，引入了分支概念。

### 分支分类

主分支：初始化本地Git仓库的时候，默认会创建一个名字为master的分支，通常称这个分支为主分支。

自定义分支：用户可以根据自己的模块，创建自己的分支，进行协同开发。

### 分支操作命令

**branch：**查看当前系统的全部分支

```
git branch
```

**branch 分支名：**创建新的分支

```
 git branch 分支名
```

**checkout：**切换分支

```
git checkout  分支名
```

**merge：**合并分支

```
git merge 分支名
```

### 分支冲突

**产生冲突操作：**

如果在两个不同的分支中，对同一个文件进行了不同的修改，分别将两个分支合并到主分支上，当合并第二个分支的时候就会产生分支冲突。

总结:当分支的版本与master版本不同步的时候会产生冲突/两个分支同时合并master的时候会产生冲突。

**解决方案：**

重新pull项目，然后手动更改冲突内容提交即可。

## 1.8 远程仓库

Git 命令都是在本地执行。在进行多人协作开发过程中，如果代码是共享式开发，则需要将代码放到一台其他开发人员能够连接的服务器上，这台服务器称为远程仓库。

**远程仓库分类：**

**github：**github是一个基于git的代码托管平台，服务器在国外，相对速度比较慢。
**gitee(码云)：**gitee是一个基于git的代码托管平台，国产平台，服务器在国内。
**公司部署**：各个大厂都有自己公司内部的服务器仓库。

**操作流程**

码云远程仓库操作步骤：
官网：https://gitee.com/
1.注册，并登录
2.创建远程仓库
(1)点击页面右上角的 + 号 
(2)点击新建仓库 
(3)添加仓库信息。包含仓库名称和路径。
(4)点击创建，完成远程仓库的创建。
3.将本地文件推送到远程仓库
4.克隆/同步远程仓库

**常用命令：**

**remote add：**将本地文件夹与远程仓库关联

```
git remote add 远程仓库的别名  远程仓库地址
```

**remote -v：**查看当前文件夹与远程仓库的关系

```
git remote -v 
```

**pull：**拉取远程仓库

```
git pull [--set-upstream 仓库别名 分支名]
```

注：当远程仓库没有更新的时候，pull命令只能拉取一次。如果有更新则只会拉取指定更新文件

**push：**提交本地文件或内容到远程仓库，

```
git push [--set-upstream 仓库别名 分支名]
```

注：提交前一定要工作区-->暂存区-->本地仓库

**clone：**克隆远程仓库

```
git clone 远程仓库的地址
```

**注：**上(班)pull,下(班)push

## 1.9 SSH访问

**SSH访问好处：**当采用SSH模式登录，可以免除登录身份认证，且数据是加密传输。

**SSH组成：**id_rsa 私钥文件（存放于开发者电脑）和id_rsa.pub 公钥文件 。

**生成步骤：**

1、打开Git Bash  

2、执行相关命令  

3、连续敲击3 次回车

**生成命令：**

**ssh-keygen：**生成公钥和密钥,同时将密钥保存在C:\Users\计算机名\.ssh文件中

```
ssh-keygen -t rsa -b 4096 -C "your_email@example.com"
```

**ssh：**检测Github 的SSH key 是否配置成功。

```
ssh -T git@gitee.com
```

**配置SSH步骤：**

(1)使用记事本打开id_rsa.pub文件，复制里面的文本内容

(2)登录gitee，点击头像-> 设置-> 安全设置:SSH公钥 -> 添加公钥

(3)将id_rsa.pub 文件中的内容，粘贴到公钥 对应的文本框中 

(4)在Title 文本框中任意填写一个名称，来标识这个Key 的所有者。

## 1.10 Git与SVN区别

**SVN：**SVN是一个开放源代码的集中式版本控制系统，用于多个人共同开发同一个项目，实现共享资源。集中式版本控制系统：版本库是集中存放在中央服务器，开发者需要先从中央服务器获取最新的版本文件，最后再把自己修改的文件推送到中央服务器。

**Git：**Git是一个开源的分布式版本控制系统，是目前比较流行的版本控制系统。可以快速高效地处理从很小到非常大的项目版本管理。采用分布式版本控制系统：没有“中央服务器”，每个人的电脑上都是一个完整的版本库，不需要联网开发，但需要采用云端/公共服务器进行多人开发的项目整合（gitee和github）。